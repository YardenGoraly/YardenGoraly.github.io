<h1>CS280A Project 1</h1>
<h2>Images of the Russian Empire:
    Colorizing the Prokudin-Gorskii photo collection</h2>
<h2>Overview:</h2>
<br>
<p>As early as 1907, Sergei Mikhailovich Prokudin-Gorskii envisioned color photography as a possibilty for the future.
    He traveled across the Russian Empire with permission from Tzar and photographed thousands of scenes. For each scene
    he took three pictures, each using a color filter, those being red, green, and blue. While his vision was not 
    realized in his lifetime, his images exist today, we are able to use software today to align the images 
    and combine the three images into one color image. 
</p>
<br>
<h2>Approach:</h2>
<p>
    For each image, I cropped all three sections of the image to exclude the borders. For small images, I cut out
    around 20px from each side whereas for the large images I cropped out between 180-240 pixels from each side. Next 
    I created a function to align two images given a search window. This function moves one of the images vertically and horizontally
    based on the window and evaluates a structural similarity score derived from comparing every pixel across the images. The displacement with 
    the best score is returned. To optimize alignment for larger images, I implemented an image pyramid. The image pyramid works by 
    aligning the image at different levels of rescaling. The lowest level is an alignment on the images scaled to 1/8th the size, and that displacement 
    informs the next level, which scales the images by 1/4 and so on. The window for the smallest image is a 50px radius around the center, but any subsequent
    window is only 4 pixels wide centered around the optimal displacement of the previous level. Finally, the optimal displacement of the original image is returned. 
    Once the r and g images are aligned to the b image, these three images become the rgb values of our final image matrix, the result of which is below. 
</p>
<p>
    On issue I ran into was choosing the correct window size and depth of the image pyramid. Having too many layers
    to the pyramid often caused worse results, and I initially did not change the window size for each depth, so runtime was slow and 
    the result still was not good. Also the same configuration of parameters did not always work for all the images. In particular, Emir was difficult 
    to align and was often incorrect even when other large images were fine. After some trial and error, I found a configuration that worked for every image. 
</p>
<br>
Images:
<br>
<h3>Cathedral, green-blue offset: x = 2, y = 5, red-blue offset: x = 3, y = 12</h3>
<img src="media/cathedral.jpg" width="auto" height="300px" alt="Cathedral">
<br>
<h3>Church, green-blue offset: x = 4, y = 25, red-blue offset: x = -4, y = 58</h3>
<img src="media/church.jpg" width="auto" height="300px" alt="church">
<br>
<h3>Emir, green-blue offset: x = 22, y = 50, red-blue offset: x = 40, y = 105</h3>
<img src="media/emir.jpg" width="auto" height="300px" alt="emir">
<br>
<h3>Harvesters, green-blue offset: x = 16, y = 59, red-blue offset: x = 13, y = 123</h3>
<img src="media/harvesters.jpg" width="auto" height="300px" alt="harvesters">
<br>
<h3>Icon, green-blue offset: x = 16, y = 39, red-blue offset: x = 23, y = 89</h3>
<img src="media/icon.jpg" width="auto" height="300px" alt="icon">
<br>
<h3>Kapri, green-blue offset: x = -17, y = 32, red-blue offset: x = -25, y = 78</h3>
<img src="media/kapri.jpg" width="auto" height="300px" alt="kapri">
<br>
<h3>Lady, green-blue offset: x = 9, y = 56, red-blue offset: x = 12, y = 119</h3>
<img src="media/lady.jpg" width="auto" height="300px" alt="lady">
<br>
<h3>Lastochkino, green-blue offset: x = -2, y = -3, red-blue offset: x = -9, y = 76</h3>
<img src="media/lastochkino.jpg" width="auto" height="300px" alt="lastochkino">
<br>
<h3>Melons, green-blue offset: x = 10, y = 80, red-blue offset: x = 13, y = 177</h3>
<img src="media/melons.jpg" width="auto" height="300px" alt="melons">
<br>
<h3>Monastery, green-blue offset: x = 2, y = -3, red-blue offset: x = 2, y = 3</h3>
<img src="media/monastery.jpg" width="auto" height="300px" alt="monastery">
<br>
<h3>Onion Church, green-blue offset: x = 26, y = 52, red-blue offset: x = 35, y = 108</h3>
<img src="media/onion_church.jpg" width="auto" height="300px" alt="onion_church">
<br>
<h3>Sculpture, green-blue offset: x = -11, y = 33, red-blue offset: x = -27, y = 140</h3>
<img src="media/sculpture.jpg" width="auto" height="300px" alt="sculpture">
<br>
<h3>Self Portrait, green-blue offset: x = 29, y = 78, red-blue offset: x = 37, y = 175</h3>
<img src="media/self_portrait.jpg" width="auto" height="300px" alt="self_portrait">
<br>
<h3>Three Generations, green-blue offset: x = 17, y = 55, red-blue offset: x = 11, y = 113</h3>
<img src="media/three_generations.jpg" width="auto" height="300px" alt="three_generations">
<br>
<h3>Tobolsk, green-blue offset: x = 3, y = 3, red-blue offset: x = 3, y = 6</h3>
<img src="media/tobolsk.jpg" width="auto" height="300px" alt="tobolsk">
<br>
<h3>Train, green-blue offset: x = 7, y = 40, red-blue offset: x = 30, y = 85</h3>
<img src="media/train.jpg" width="auto" height="300px" alt="train">
<br>
<h3>Zakat, green-blue offset: x = -40, y = 75, red-blue offset: x = -67, y = 113</h3>
<img src="media/zakat.jpg" width="auto" height="300px" alt="zakat">